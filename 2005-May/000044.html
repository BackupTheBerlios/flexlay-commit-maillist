<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Flexlay-commit] r549 - trunk/supertux
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/flexlay-commit/2005-May/index.html" >
   <LINK REL="made" HREF="mailto:flexlay-commit%40lists.berlios.de?Subject=Re%3A%20%5BFlexlay-commit%5D%20r549%20-%20trunk/supertux&In-Reply-To=%3C200505082152.j48LqtJ2031809%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000043.html">
   <LINK REL="Next"  HREF="000045.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Flexlay-commit] r549 - trunk/supertux</H1>
    <B>Matthias Braun at BerliOS</B> 
    <A HREF="mailto:flexlay-commit%40lists.berlios.de?Subject=Re%3A%20%5BFlexlay-commit%5D%20r549%20-%20trunk/supertux&In-Reply-To=%3C200505082152.j48LqtJ2031809%40sheep.berlios.de%3E"
       TITLE="[Flexlay-commit] r549 - trunk/supertux">matzebraun at sheep.berlios.de
       </A><BR>
    <I>Sun May  8 23:52:55 CEST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000043.html">[Flexlay-commit] r548 - trunk/supertux
</A></li>
        <LI>Next message: <A HREF="000045.html">[Flexlay-commit] r550 - in trunk: ruby supertux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44">[ date ]</a>
              <a href="thread.html#44">[ thread ]</a>
              <a href="subject.html#44">[ subject ]</a>
              <a href="author.html#44">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: matzebraun
Date: 2005-05-08 23:52:53 +0200 (Sun, 08 May 2005)
New Revision: 549

Removed:
   trunk/supertux/supertux.scm
   trunk/supertux/tuxtiles.scm
Modified:
   trunk/supertux/data.rb
   trunk/supertux/supertux.rb
Log:
applied another patch from marek, remove old files

Modified: trunk/supertux/data.rb
===================================================================
--- trunk/supertux/data.rb	2005-05-08 21:16:58 UTC (rev 548)
+++ trunk/supertux/data.rb	2005-05-08 21:52:53 UTC (rev 549)
@@ -23,6 +23,8 @@
     proc{|data, sexpr| BadGuy.new(&quot;mrtree&quot;)}],
   [&quot;poisonivy&quot;, &quot;images/creatures/poison_ivy/left-0.png&quot;, &quot;sprite&quot;,
     proc{|data, sexpr| BadGuy.new(&quot;poisonivy&quot;)}],
+  [&quot;zeekling&quot;, &quot;images/creatures/zeekling/left-0.png&quot;, &quot;sprite&quot;,
+    proc{|data, sexpr| BadGuy.new(&quot;zeekling&quot;)}],
   [&quot;dispenser&quot;, &quot;images/creatures/dispenser/working.png&quot;, &quot;sprite&quot;,
     proc{|data, sexpr| Dispenser.new(data, sexpr)}],
   [&quot;yeti&quot;, &quot;images/creatures/yeti/yeti.png&quot;, &quot;sprite&quot;,

Modified: trunk/supertux/supertux.rb
===================================================================
--- trunk/supertux/supertux.rb	2005-05-08 21:16:58 UTC (rev 548)
+++ trunk/supertux/supertux.rb	2005-05-08 21:52:53 UTC (rev 549)
@@ -29,6 +29,7 @@
     &quot;/usr/local/share/games/supertux/&quot;,
     &quot;/opt/supertux/data/&quot;,
     &quot;~projects/supertux/trunk/supertux/data/&quot;,
+    &quot;~/data/projects/supertux/trunk/supertux/data&quot;,
   ]
   # `which supertux`
 end

Deleted: trunk/supertux/supertux.scm
===================================================================
--- trunk/supertux/supertux.scm	2005-05-08 21:16:58 UTC (rev 548)
+++ trunk/supertux/supertux.scm	2005-05-08 21:52:53 UTC (rev 549)
@@ -1,568 +0,0 @@
-(use-modules (oop goops))
-(load &quot;helper.scm&quot;)
-(display &quot;SuperTux Startup Script\n&quot;)
-
-(define *game* 'supertux)
-(define *tile-size* 32)
-(define *supertux:datadir* &quot;/home/ingo/cvs/supertux/supertux/data/&quot;)
-(game-load-resources &quot;tuxtiles.xml&quot;)
-(game-load-resources &quot;tuxsprites.xml&quot;)
-
-(define *worldmap-tileset* (tileset-create *tile-size*))
-(define *level-tileset*    (tileset-create *tile-size*))
-
-(define (supertux:load-tiles filename)
-  (with-input-from-file filename
-    (lambda ()
-      (let* ((data (read))
-             (ident (car data)))
-        (cond ((equal? ident 'supertux-tiles)
-               (for-each (lambda (el)
-                           (cond ((equal? (car el) 'tile)
-                                  ;;(display (cdr el))(newline)
-                                  (tileset-add-tile *level-tileset*
-                                   (list (list 'id   
-                                               (get-value-from-tree '(id _) (cdr el) -1))
-                                         (list 'image 
-                                               (string-append *supertux:datadir* &quot;images/tiles/&quot; 
-                                                              (or (get-value-from-tree '(editor-images _) (cdr el) #f)
-                                                                  (get-value-from-tree '(images _) (cdr el) &quot;notile.png&quot;))))
-                                         )))))
-                         (cdr data)))
-              (else
-               (error &quot;Not a supertux tileset&quot;)))))))
-
-(define (supertux:load-worldmap-tiles filename)
-  (with-input-from-file filename
-    (lambda ()
-      (let* ((data (read))
-             (ident (car data)))
-        (cond ((equal? ident 'supertux-worldmap-tiles)
-               (for-each (lambda (el)
-                           (cond ((equal? (car el) 'tile)
-                                  (tileset-add-tile *worldmap-tileset*
-                                   (list (list 'id   
-                                               (get-value-from-tree '(id _) (cdr el) -1))
-                                         (list 'image 
-                                               (string-append *supertux:datadir* &quot;images/tiles/worldmap/&quot;
-                                                              (get-value-from-tree '(image _) (cdr el) &quot;auxiliary/notile.png&quot;))))
-                                   ))))
-                         (cdr data)))
-              (else
-               (error &quot;Not a supertux worldmap tileset&quot;)))))))
-
-(supertux:load-worldmap-tiles (string-append *supertux:datadir* &quot;images/tiles/worldmap/antarctica.stwt&quot;))
-(supertux:load-tiles (string-append *supertux:datadir* &quot;images/tiles/supertux.stgt&quot;))
-
-;;(tileset-add-tile '((id 6)
-;;                    (image &quot;/home/ingo/projects/windstille/trunk/data/images/tuxsprites/mrbomb.png&quot;)
-;;                    (colmap   0   0   0   0   0   0   0   0)))
-
-(set-window-title &quot;Flexlay - SuperTux Mode&quot;)
-
-;; Metadata for a SuperTux level
-(define-class &lt;supertux-level&gt; ()
-  (name   #:init-value &quot;Hello World&quot;
-          #:accessor supertux:name)
-  (author #:init-value &quot;&quot;
-          #:accessor supertux:author)
-  ;;  (width  #:init-value 20
-  ;;          #:accessor supertux:width)
-  ;;  (height #:init-value 15
-  ;;          #:accessor supertux:height)
-  (background #:init-value &quot;&quot; 
-              #:accessor supertux:background)
-  (music      #:init-value &quot;Mortimers_chipdisko.mod&quot;
-              #:accessor supertux:music)
-
-  (start-pos-x #:accessor supertux:start-pos-x
-               #:init-value 100)
-  (start-pos-y #:accessor supertux:start-pos-y
-               #:init-value 100)
-
-  (bkgd_red_bottom   #:init-value 150
-                  #:accessor supertux:bkgd_red_bottom)
-  (bkgd_green_bottom #:init-value 200
-              #:accessor supertux:bkgd_green_bottom)
-  (bkgd_blue_bottom  #:init-value 255
-              #:accessor supertux:bkgd_blue_bottom)
-
-  (bkgd_red_top   #:init-value 150
-                  #:accessor supertux:bkgd_red_top)
-  (bkgd_green_top #:init-value 200
-              #:accessor supertux:bkgd_green_top)
-  (bkgd_blue_top  #:init-value 255
-              #:accessor supertux:bkgd_blue_top)
-
-  (time       #:init-value 500
-              #:accessor supertux:time)
-  (gravity    #:init-value 10
-              #:accessor supertux:gravity)
-  (particle_system #:init-value &quot;&quot;
-                   #:accessor supertux:particle-system)
-  (theme      #:init-value &quot;antarctica&quot;
-              #:accessor supertux:theme)
-  (interactive-tm #:init-value #f
-                  #:accessor supertux:interactive-tm)
-  (foreground-tm  #:init-value #f
-                  #:accessor supertux:foreground-tm)
-  (background-tm  #:init-value #f 
-                  #:accessor supertux:background-tm)
-  (objmap #:init-value #f 
-          #:accessor supertux:objmap))
-
-(define-class &lt;supertux-worldmap&gt; ()
-  (tilemap #:init-value #f
-           #:init-keyword #:tilemap
-           #:accessor stwm:tilemap))
-
-(define-generic supertux:activate)
-
-(define-method (supertux:activate (stwm &lt;supertux-worldmap&gt;))
-  (let ((tilemap (stwm:tilemap stwm)))
-    (tilemap-paint-tool-set-tilemap tilemap)
-    (set! *tilemap* tilemap)
-    (editor-tilemap-set-current tilemap)
-    (tileset-set-current *worldmap-tileset*)
-    (tile-selector-set-tileset *tileselector* *worldmap-tileset*)
-    ))
-
-(define-method (supertux:activate (stlv &lt;supertux-level&gt;))
-  (tilemap-paint-tool-set-tilemap (supertux:interactive-tm stlv))
-  (editor-tilemap-set-current     (supertux:interactive-tm stlv))
-  (editor-objectmap-set-current   (supertux:objmap stlv))
-  (set! *tilemap* (supertux:interactive-tm stlv))
-  (set! *objmap* (supertux:objmap stlv))
-  (tileset-set-current *level-tileset*)
-  (tile-selector-set-tileset *tileselector* *level-tileset*))
-
-(define (supertux:new-map width height)
-  (let ((levelmap (supertux:create-levelmap width height)))
-    (editor-map-activate levelmap)
-    (add-buffer levelmap)))
-
-(define (supertux:create-levelmap width height)
-  (let ((level    (make &lt;supertux-level&gt;))
-        (levelmap (editor-map-create)))
-    
-    (set! (supertux:foreground-tm  level) (editor-tilemap-create *level-tileset*
-                                                                 width height *tile-size*))
-    (set! (supertux:interactive-tm level) (editor-tilemap-create *level-tileset*
-                                                                 width height *tile-size*))
-    (set! (supertux:background-tm  level) (editor-tilemap-create *level-tileset*
-                                                                 width height *tile-size*))
-    (set! (supertux:objmap         level) (editor-objmap-create))
-    
-    (editor-map-add-layer levelmap (supertux:background-tm  level))
-    (editor-map-add-layer levelmap (supertux:interactive-tm level))
-    (editor-map-add-layer levelmap (supertux:foreground-tm  level))
-    (editor-map-add-layer levelmap (supertux:objmap         level))
-
-    (supertux:activate level)
-    (editor-toggle-grid *tilemap*)
-    
-    (editor-map-set-filename levelmap &quot;/tmp/foobar.stlv&quot;)
-    (editor-map-set-metadata levelmap level)
-    levelmap))
-
-(define-method (supertux:resize (stwm &lt;supertux-worldmap&gt;) w h x y)
-  (editor-tilemap-resize (stwm:tilemap stwm) w h x y))
-
-(define-method (supertux:resize (stlv &lt;supertux-level&gt;) w h x y)
-  (editor-tilemap-resize (supertux:background-tm  stlv) w h x y)
-  (editor-tilemap-resize (supertux:interactive-tm stlv) w h x y)
-  (editor-tilemap-resize (supertux:foreground-tm  stlv) w h x y))
-
-(define-method (supertux:save-map (stlv &lt;supertux-level&gt;) filename)
-  ;; FIXME: This is old style singleton code
-  (if (access? filename F_OK)
-      (rename-file filename (string-append filename &quot;~&quot;)))
-
-  (let* ((levelmap (editor-map-get-current))
-         (level    (editor-map-get-metadata levelmap)))
-    (format #t &quot;Level: ~a~%&quot; level)
-    (with-output-to-file filename
-      (lambda ()
-               ;; New style save code
-               (display   &quot;;; Generated by Flexlay Editor\n&quot;)
-               (display   &quot;(supertux-level\n&quot;)
-
-               (display   &quot;  (version 1)\n&quot;)
-               (format #t &quot;  (author ~s)\n&quot; (supertux:author level))
-               (format #t &quot;  (name ~s)~%&quot;   (supertux:name level))
-               (format #t &quot;  (width  ~a)~%&quot; (editor-tilemap-get-width  (supertux:interactive-tm level)))
-               (format #t &quot;  (height ~a)~%&quot; (editor-tilemap-get-height (supertux:interactive-tm level)))
-
-               (format #t &quot;  (start_pos_x    ~a)~%&quot; (supertux:start-pos-x level))
-               (format #t &quot;  (start_pos_y    ~a)~%&quot; (supertux:start-pos-y level))
-
-               (format #t &quot;  (background ~s)~%&quot; (supertux:background level))
-               (format #t &quot;  (music ~s)~%&quot; (supertux:music level))
-
-               (format #t &quot;  (bkgd_red_top    ~a)~%&quot; (supertux:bkgd_red_top level))
-               (format #t &quot;  (bkgd_green_top  ~a)~%&quot; (supertux:bkgd_green_top level))
-               (format #t &quot;  (bkgd_blue_top   ~a)~%&quot; (supertux:bkgd_blue_top level))
-
-               (format #t &quot;  (bkgd_red_bottom    ~a)~%&quot; (supertux:bkgd_red_bottom level))
-               (format #t &quot;  (bkgd_green_bottom  ~a)~%&quot; (supertux:bkgd_green_bottom level))
-               (format #t &quot;  (bkgd_blue_bottom   ~a)~%&quot; (supertux:bkgd_blue_bottom level))
-
-               (format #t &quot;  (time  ~a)~%&quot; (supertux:time level))
-               (format #t &quot;  (gravity  ~a)~%&quot; (supertux:gravity level))
-               (format #t &quot;  (particle_system ~s)~%&quot; (supertux:particle-system level))
-               (format #t &quot;  (theme ~s)~%&quot; (supertux:theme level))
-
-               (let ((width (editor-tilemap-get-width (supertux:interactive-tm level))))
-                 (display     &quot;  (interactive-tm\n&quot;)
-                 (write-field &quot;   &quot; width
-                              (editor-tilemap-get-data (supertux:interactive-tm level)))
-                 (display     &quot;   )\n\n&quot;)
-
-                 (display     &quot;  (background-tm\n&quot;)
-                 (write-field &quot;   &quot; width
-                              (editor-tilemap-get-data (supertux:background-tm level)))
-                 (display     &quot;   )\n\n&quot;)
-
-                 (display     &quot;  (foreground-tm\n&quot;)
-                 (write-field &quot;   &quot; width
-                              (editor-tilemap-get-data (supertux:foreground-tm level)))
-                 (display     &quot;   )\n\n&quot;))
-               
-               (format #t &quot;  (reset-points\n&quot;)
-               (for-each (lambda (el)
-                           (let* ((obj (editor-objectmap-get-object (supertux:objmap level) el)))
-                             (cond ((equal? (caaddr obj) 'resetpoint)
-                                    (format #t &quot;    (point (x ~a) (y ~a))~%&quot; 
-                                            (car obj)
-                                            (cadr obj)
-                                            )))))
-                         (editor-objectmap-get-objects (supertux:objmap level)))
-               (format #t &quot;   )\n&quot;)
-
-               (format #t &quot;  (objects\n&quot;)
-               (for-each (lambda (el)
-                           (let* ((obj (editor-objectmap-get-object (supertux:objmap level) el)))
-                             (cond ((not (equal? (caaddr obj) 'resetpoint))
-                                    (format #t &quot;    (~a  (x ~a) (y ~a))~%&quot; 
-                                            (caaddr obj)
-                                            (car obj)
-                                            (cadr obj)
-                                            )))))
-                         (editor-objectmap-get-objects (supertux:objmap level)))
-               (format #t &quot;  )\n&quot;)
-
-               (format #t &quot;   )\n\n&quot;)
-
-               (newline)
-               (display &quot;;; EOF ;;\n&quot;)))
-    (editor-map-set-unmodified levelmap)))
-
-(define (supertux:load-map filename)
-  (catch #t
-         (lambda ()
-           (let ((levelmap (supertux:create-level-map-from-file filename)))
-             (editor-map-activate levelmap)
-             (add-buffer levelmap)
-             ))
-         (lambda args
-           (editor-error args)))
-  (push-last-file filename))
-
-(define (supertux:translate-v0-tiles num)
-  (let ((transtbl '(
-                    (#\! 103)
-                    (#\# 11)
-                    (#\$ 82)
-                    (#\&amp; 75)
-                    (#\* 80)
-                    (#\. 0)
-                    (#\0 0)
-                    (#\1 0)
-                    (#\2 0)
-                    (#\= 14)
-                    (#\A 83)
-                    (#\B 102)
-                    (#\C 85)
-                    (#\D 86)
-                    (#\E 87)
-                    (#\F 88)
-                    (#\G 93)
-                    (#\H 94)
-                    (#\I 95)
-                    (#\J 96)
-                    (#\X 77)
-                    (#\Y 105)
-                    (#\[ 13 )
-                    (#\\ 81)
-                    (#\] 15)
-                    (#\^ 76)
-                    (#\a 84)
-                    (#\c 89)
-                    (#\d 90)
-                    (#\e 91)
-                    (#\f 92)
-                    (#\g 97)
-                    (#\h 98)
-                    (#\i 99)
-                    (#\j 100)
-                    (#\x 104)
-                    (#\y 78)
-                    (#\| 79)
-                    )))
-    (let ((ret (assoc-ref transtbl (integer-&gt;char num))))
-      (cond (ret
-             (car ret))
-            (else
-             (format #t &quot;couldn't translate ~a~%&quot; num)
-             0)))))
-
-
-(define (supertux:create-worldmap-from-file filename)
-  (let* ((m       (editor-map-create))
-         (data    (with-input-from-file filename
-                    (lambda () (cdr (read)))))
-         (width   (get-value-from-tree '(tilemap width  _) data 19))
-         (height  (get-value-from-tree '(tilemap height _) data 14))
-         (tilemap (editor-tilemap-create *worldmap-tileset*
-                                         width height 32))
-         (stwm    (make &lt;supertux-worldmap&gt; #:tilemap tilemap)))
-    (format #t &quot;Size: ~ax~a~%&quot; width height)
-    (editor-tilemap-set-data tilemap (get-value-from-tree '(tilemap data) data '()))
-    (editor-map-add-layer m tilemap)
-    (editor-map-set-metadata m stwm)
-    (editor-toggle-grid *tilemap*)
-    (supertux:activate stwm)
-    m))
-
-(define-method (supertux:save-map (stwm &lt;supertux-worldmap&gt;) filename)
-  (if (access? filename F_OK)
-      (rename-file filename (string-append filename &quot;~&quot;)))
-
-  (let* ((m       (editor-map-get-current))
-         (stwm    (editor-map-get-metadata m))
-         (tilemap (stwm:tilemap stwm)))
-    (with-output-to-file filename
-      (lambda ()
-        (display &quot;;; Generated with Flexlay Editor\n&quot;)
-        (display &quot;(supertux-worldmap\n&quot;)
-        (display &quot;  (tilemap \n&quot;)
-        (format #t &quot;    (width  ~a)~%&quot; (editor-tilemap-get-width  tilemap))
-        (format #t &quot;    (height ~a)~%&quot; (editor-tilemap-get-height tilemap))
-        (display &quot;    (data\n&quot;)
-        (write-field &quot;       &quot; 
-                     (editor-tilemap-get-width tilemap)
-                     (editor-tilemap-get-data  tilemap))
-        (display &quot;    ))\n&quot;)
-        (display &quot;)\n&quot;)
-        (newline)
-        ))))
-
-(define (supertux:create-level-map-from-file filename)
-  (display &quot;Loading SuperTux level: &quot;)
-  (display filename)
-  (newline)
-  (let* ((data (with-input-from-file filename
-                 (lambda () (cdr (read)))))
-         (level   (make &lt;supertux-level&gt;))
-         (version (get-value-from-tree '(version _) data 0)))
-    ;; read in the level metadata
-    (set! (supertux:name  level)      (get-value-from-tree '(name _) data 20))
-    (set! (supertux:author level)     (get-value-from-tree '(author _) data &quot;&quot;))
-    (set! (supertux:theme level)      (get-value-from-tree '(theme _) data &quot;antarctica&quot;))
-    (set! (supertux:music level)      (get-value-from-tree '(music _) data &quot;Mortimers_chipdisko.mod&quot;))
-    (set! (supertux:background level) (get-value-from-tree '(background _)   data &quot;arctis.jpg&quot;))
-
-    (set! (supertux:start-pos-x level) (get-value-from-tree '(start_pos_x  _) data 100))
-    (set! (supertux:start-pos-y level) (get-value-from-tree '(start_pos_y  _) data 170))
-
-    (set! (supertux:bkgd_red_bottom   level) (get-value-from-tree '(bkgd_red_bottom   _) data 150))
-    (set! (supertux:bkgd_green_bottom level) (get-value-from-tree '(bkgd_green_bottom _) data 200))
-    (set! (supertux:bkgd_blue_bottom  level) (get-value-from-tree '(bkgd_blue_bottom  _) data 255))
-
-    (set! (supertux:bkgd_red_top   level) (get-value-from-tree '(bkgd_red_top   _) data 150))
-    (set! (supertux:bkgd_green_top level) (get-value-from-tree '(bkgd_green_top _) data 200))
-    (set! (supertux:bkgd_blue_top  level) (get-value-from-tree '(bkgd_blue_top  _) data 255))
-
-    (set! (supertux:time  level)      (get-value-from-tree '(time _)         data 250))
-    (set! (supertux:particle-system level)     (get-value-from-tree '(particle_system _) data &quot;&quot;))
-    (set! (supertux:gravity         level)     (get-value-from-tree '(gravity _)      data 10))
-
-    (let ((width   (get-value-from-tree '(width _)    data 20))
-          (height  (get-value-from-tree '(height _)   data 15))
-          (objects (get-value-from-tree '(objects)   data '()))
-          (reset-points (get-value-from-tree '(reset-points)  data '()))
-          (interactive-tm (get-value-from-tree '(interactive-tm) data '()))
-          (background-tm  (get-value-from-tree '(background-tm)  data '()))
-          (foreground-tm  (get-value-from-tree '(foreground-tm)  data '())))
-
-      ;; load level file and extract tiledata and w/h
-      (let* ((m       (editor-map-create))
-             (objmap  (editor-objmap-create)))
-
-        (set! (supertux:objmap          level) objmap)
-        (set! (supertux:interactive-tm  level) (editor-tilemap-create *level-tileset*
-                                                                      width height *tile-size*))
-        (set! (supertux:background-tm   level) (editor-tilemap-create *level-tileset*
-                                                                      width height *tile-size*))
-        (set! (supertux:foreground-tm   level) (editor-tilemap-create *level-tileset*
-                                                                      width height *tile-size*))
-        (set! *tilemap* (supertux:interactive-tm  level))
-        (set! *objmap*  (supertux:objmap level))
-
-        ;; set data to the tilemap
-        (if (not (null? interactive-tm))
-            (editor-tilemap-set-data (supertux:interactive-tm level) interactive-tm)
-            (display &quot;Error: interactive-tm missing\n&quot;))
-        (if (not (null? foreground-tm))
-            (editor-tilemap-set-data (supertux:foreground-tm level) foreground-tm)
-            (display &quot;Error: foreground-tm missing\n&quot;))
-        (if (not (null? background-tm))
-            (editor-tilemap-set-data (supertux:background-tm level) background-tm)
-            (display &quot;Error: background-tm missing\n&quot;))
-
-        (cond ((= version 0)
-               (let ((tilemap (get-value-from-tree '(interactive-tm) data 
-                                                   (get-value-from-tree '(tilemap) data '()))))
-
-                 (let ((i 0))
-                   (for-each (lambda (el)
-                               (let ((x (* 32 (remainder i width)))
-                                     (y (* 32 (quotient  i width))))
-                                 (cond ((= el 48) ;; 0
-                                        (objectmap-add-object objmap 
-                                                              (string-append *supertux:datadir* &quot;images/shared/snowball-left-0.png&quot;)
-                                                              x y '(snowball)))
-                                       ((= el 49) ;; 1
-                                        (objectmap-add-object objmap 
-                                                              (string-append *supertux:datadir* &quot;images/shared/mriceblock-left-0.png&quot;)
-                                                              x y '(mriceblock)))
-                                       ((= el 50) ;; 2
-                                        (objectmap-add-object objmap
-                                                              (string-append *supertux:datadir* &quot;images/shared/jumpy-left-middle-0.png&quot;)
-                                                              x y '(money)))))
-                               (set! i (+ i 1)))
-                             tilemap))
-                 (editor-tilemap-set-data (supertux:interactive-tm level)
-                                          (map supertux:translate-v0-tiles tilemap)))))
-
-        (display (supertux:interactive-tm level))(newline)
-
-        (for-each (lambda (el)
-                    (let ((x (get-value-from-tree '(x _) (cdr el) 0))
-                          (y (get-value-from-tree '(y _) (cdr el) 0)))
-                      (objectmap-add-object objmap
-                                            (string-append *supertux:datadir* &quot;images/shared/resetpoint.png&quot;)
-                                            x y '(resetpoint))))
-                  reset-points)
-
-        (for-each (lambda (el)
-                    (let ((x (get-value-from-tree '(x _) (cdr el) 0))
-                          (y (get-value-from-tree '(y _) (cdr el) 0)))
-                      (case (car el)
-                        ((money jumpy)
-                         (objectmap-add-object objmap
-                                               (string-append *supertux:datadir* &quot;images/shared/jumpy-left-middle-0.png&quot;)
-                                               x y '(money)))
-                        ((mriceblock laptop)
-                         (objectmap-add-object objmap
-                                               (string-append *supertux:datadir* &quot;images/shared/mriceblock-left-0.png&quot;)
-                                               x y '(mriceblock)))
-                        ((snowball bsod)
-                         (objectmap-add-object objmap
-                                               (string-append *supertux:datadir* &quot;images/shared/snowball-left-0.png&quot;)
-                                               x y '(snowball)))
-                        ((mrbomb)
-                         (objectmap-add-object objmap
-                                               (string-append *supertux:datadir* &quot;images/shared/mrbomb-left-0.png&quot;)
-                                               x y '(mrbomb)))
-                        ((stalactite)
-                         (objectmap-add-object objmap
-                                               (string-append *supertux:datadir* &quot;images/shared/stalactite.png&quot;)
-                                               x y '(stalactite)))
-                        ((flame)
-                         (objectmap-add-object objmap
-                                               (string-append *supertux:datadir* &quot;images/shared/flame-0.png&quot;)
-                                               x y '(flame)))
-                        ((fish)
-                         (objectmap-add-object objmap
-                                               (string-append *supertux:datadir* &quot;images/shared/fish-left-0.png&quot;)
-                                               x y '(fish)))
-                        ((flyingsnowball)
-                         (objectmap-add-object objmap
-                                               (string-append *supertux:datadir* &quot;images/shared/flyingsnowball-left-0.png&quot;)
-                                               x y '(flyingsnowball)))
-                        ((bouncingsnowball)
-                         (objectmap-add-object objmap
-                                               (string-append *supertux:datadir* &quot;images/shared/bouncingsnowball-left-0.png&quot;)
-                                               x y '(bouncingsnowball)))
-                        ((spiky)
-                         (objectmap-add-object objmap
-                                               (string-append *supertux:datadir* &quot;images/shared/spiky-left-0.png&quot;)
-                                               x y '(spiky)))
-                        )))
-                  objects)
-        
-        (editor-map-add-layer m (supertux:background-tm  level))
-        (editor-map-add-layer m (supertux:interactive-tm level))
-        (editor-map-add-layer m (supertux:foreground-tm  level))
-
-        (editor-tilemap-set-bgcolor (supertux:background-tm  level) 150 200 255 255)
-
-        (editor-map-add-layer m (supertux:objmap         level))
-
-        (supertux:activate level)
-
-        (editor-map-set-filename m filename)
-        (editor-map-set-metadata m level)
-        m))))
-
-(define (supertux:set-background-layer-only)
-  (let ((level (editor-map-get-metadata (editor-map-get-current))))
-    (editor-tilemap-set-fgcolor (supertux:background-tm  level) 255 255 255 255)
-    (editor-tilemap-set-fgcolor (supertux:interactive-tm level)   0   0   0  10)
-    (editor-tilemap-set-fgcolor (supertux:foreground-tm  level)   0   0   0  10)
-    (tilemap-paint-tool-set-tilemap (supertux:background-tm level))))
-
-(define (supertux:set-interactive-layer-only)
-  (let ((level (editor-map-get-metadata (editor-map-get-current))))
-    (editor-tilemap-set-fgcolor (supertux:background-tm  level)   0   0   0  10)
-    (editor-tilemap-set-fgcolor (supertux:interactive-tm level) 255 255 255 255)
-    (editor-tilemap-set-fgcolor (supertux:foreground-tm  level)   0   0   0  10)
-    (tilemap-paint-tool-set-tilemap (supertux:interactive-tm level))))
-
-(define (supertux:set-foreground-layer-only)
-  (let ((level (editor-map-get-metadata (editor-map-get-current))))
-    (editor-tilemap-set-fgcolor (supertux:background-tm  level)   0   0   0  10)
-    (editor-tilemap-set-fgcolor (supertux:interactive-tm level)   0   0   0  10)
-    (editor-tilemap-set-fgcolor (supertux:foreground-tm  level) 255 255 255 255)
-    (tilemap-paint-tool-set-tilemap (supertux:foreground-tm level))))
-
-
-(define (supertux:set-background-layer-active)
-  (let ((level (editor-map-get-metadata (editor-map-get-current))))
-    (editor-tilemap-set-fgcolor (supertux:background-tm  level) 255 255 255 255)
-    (editor-tilemap-set-fgcolor (supertux:interactive-tm level) 150 250 150 150)
-    (editor-tilemap-set-fgcolor (supertux:foreground-tm  level) 255 150 150 150)
-    (tilemap-paint-tool-set-tilemap (supertux:background-tm level))))
-
-(define (supertux:set-interactive-layer-active)
-  (let ((level (editor-map-get-metadata (editor-map-get-current))))
-    (editor-tilemap-set-fgcolor (supertux:background-tm  level) 150 150 250 150)
-    (editor-tilemap-set-fgcolor (supertux:interactive-tm level) 255 255 255 255)
-    (editor-tilemap-set-fgcolor (supertux:foreground-tm  level) 255 150 150 150)
-    (tilemap-paint-tool-set-tilemap (supertux:interactive-tm level))))
-
-(define (supertux:set-foreground-layer-active)
-  (let ((level (editor-map-get-metadata (editor-map-get-current))))
-    (editor-tilemap-set-fgcolor (supertux:background-tm  level) 150 150 250 150)
-    (editor-tilemap-set-fgcolor (supertux:interactive-tm level) 255 150 150 150)
-    (editor-tilemap-set-fgcolor (supertux:foreground-tm  level) 255 255 255 255)
-    (tilemap-paint-tool-set-tilemap (supertux:foreground-tm level))))
-
-(define (supertux:show-all-layers)
-  (let ((level (editor-map-get-metadata (editor-map-get-current))))
-    (editor-tilemap-set-fgcolor (supertux:background-tm  level) 255 255 255 255)
-    (editor-tilemap-set-fgcolor (supertux:interactive-tm level) 255 255 255 255)
-    (editor-tilemap-set-fgcolor (supertux:foreground-tm  level) 255 255 255 255)))
-
-;; EOF ;;

Deleted: trunk/supertux/tuxtiles.scm
===================================================================
--- trunk/supertux/tuxtiles.scm	2005-05-08 21:16:58 UTC (rev 548)
+++ trunk/supertux/tuxtiles.scm	2005-05-08 21:52:53 UTC (rev 549)
@@ -1,236 +0,0 @@
-(windstille-tiles
- (tile (id 1)
-       (image &quot;tiles/background1&quot;)
-       (colmap   0   0   0   0   0   0   0   0))
- (tile (id 2)
-       (image &quot;tiles/background2&quot;)
-       (colmap   0   0   0   0   0   0   0   0))
- (tile (id 3)
-       (image &quot;tiles/background3&quot;)
-       (colmap   0   0   0   0   0   0   0   0))
- (tile (id 4)
-       (image &quot;tiles/background4&quot;)
-       (colmap   0   0   0   0   0   0   0   0))
- (tile (id 5)
-       (image &quot;tiles/background5&quot;)
-       (colmap   0   0   0   0   0   0   0   0))
- (tile (id 6)
-       (image &quot;tiles/background6&quot;)
-       (colmap   0   0   0   0   0   0   0   0))
-
- (tile (id 7)
-       (image &quot;tiles/snow1&quot;)
-       (colmap   0   0   0   0   0   0   0   0))
- (tile (id 8)
-       (image &quot;tiles/snow2&quot;)
-       (colmap   0   0   0   0   0   0   0   0))
- (tile (id 9)
-       (image &quot;tiles/snow3&quot;)
-       (colmap   0   0   0   0   0   0   0   0))
- (tile (id 10)
-       (image &quot;tiles/snow4&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 11)
-       (image &quot;tiles/snow5&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 12)
-       (image &quot;tiles/snow6&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 13)
-       (image &quot;tiles/snow7&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 14)
-       (image &quot;tiles/snow8&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 15)
-       (image &quot;tiles/snow9&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 16)
-       (image &quot;tiles/snow10&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 17)
-       (image &quot;tiles/snow11&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 18)
-       (image &quot;tiles/snow12&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 19)
-       (image &quot;tiles/snow13&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 20)
-       (image &quot;tiles/snow14&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 21)
-       (image &quot;tiles/snow15&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 22)
-       (image &quot;tiles/snow16&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 23)
-       (image &quot;tiles/snow17&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
-
- (tile (id 24)
-       (image &quot;tiles/background7&quot;)
-       (colmap   0   0   0   0   0   0   0   0))
- (tile (id 25)
-       (image &quot;tiles/background8&quot;)
-       (colmap   0   0   0   0   0   0   0   0))
-
- (tile (id 26)
-       (image &quot;tiles/bonus1&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 27)
-       (image &quot;tiles/block1&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 28)
-       (image &quot;tiles/block2&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 29)
-       (image &quot;tiles/block3&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 30)
-       (image &quot;tiles/snow18&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 31)
-       (image &quot;tiles/snow19&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
-
- (tile (id 32)
-       (image &quot;tiles/darksnow1&quot;)
-       (colmap   0   0   0   0   0   0   0   0))
- (tile (id 33)
-       (image &quot;tiles/darksnow2&quot;)
-       (colmap   0   0   0   0   0   0   0   0))
- (tile (id 34)
-       (image &quot;tiles/darksnow3&quot;)
-       (colmap   0   0   0   0   0   0   0   0))
- (tile (id 35)
-       (image &quot;tiles/darksnow4&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 36)
-       (image &quot;tiles/darksnow5&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 37)
-       (image &quot;tiles/darksnow6&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 38)
-       (image &quot;tiles/darksnow7&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 39)
-       (image &quot;tiles/darksnow8&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 40)
-       (image &quot;tiles/darksnow9&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 41)
-       (image &quot;tiles/darksnow10&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 42)
-       (image &quot;tiles/darksnow11&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 43)
-       (image &quot;tiles/darksnow12&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
-
- (tile (id 44)
-       (image &quot;tiles/coin1&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 45)
-       (image &quot;tiles/coin2&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 46)
-       (image &quot;tiles/coin3&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
-
-
- (tile (id 47)
-       (image &quot;tiles/block4&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 48)
-       (image &quot;tiles/block5&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 49)
-       (image &quot;tiles/block6&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 50)
-       (image &quot;tiles/block7&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 51)
-       (image &quot;tiles/block8&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 52)
-       (image &quot;tiles/block9&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
-
- (tile (id 53)
-       (image &quot;tiles/pipe1&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 54)
-       (image &quot;tiles/pipe2&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 55)
-       (image &quot;tiles/pipe3&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 56)
-       (image &quot;tiles/pipe4&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 57)
-       (image &quot;tiles/pipe5&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 58)
-       (image &quot;tiles/pipe6&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 59)
-       (image &quot;tiles/pipe7&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 60)
-       (image &quot;tiles/pipe8&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 61)
-       (image &quot;tiles/block10&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 62)
-       (image &quot;tiles/block11&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
-; (tile (id 63)
-;       (image &quot;tiles/backgroundtile1&quot;)
-;       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 64)
-       (image &quot;tiles/grey&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 65)
-       (image &quot;tiles/grey2&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 66)
-       (image &quot;tiles/grey3&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 67)
-       (image &quot;tiles/grey4&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 68)
-       (image &quot;tiles/grey5&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 69)
-       (image &quot;tiles/grey6&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
-
- (tile (id 70)
-       (image &quot;tiles/backgroundtile1&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 71)
-       (image &quot;tiles/backgroundtile2&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 72)
-       (image &quot;tiles/backgroundtile3&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 73)
-       (image &quot;tiles/backgroundtile4&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
- (tile (id 74)
-       (image &quot;tiles/backgroundtile5&quot;)
-       (colmap 255 255 255 255 255 255 255 255))
-
- )
-
-;; EOF ;;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000043.html">[Flexlay-commit] r548 - trunk/supertux
</A></li>
	<LI>Next message: <A HREF="000045.html">[Flexlay-commit] r550 - in trunk: ruby supertux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44">[ date ]</a>
              <a href="thread.html#44">[ thread ]</a>
              <a href="subject.html#44">[ subject ]</a>
              <a href="author.html#44">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/flexlay-commit">More information about the Flexlay-commit
mailing list</a><br>
</body></html>
